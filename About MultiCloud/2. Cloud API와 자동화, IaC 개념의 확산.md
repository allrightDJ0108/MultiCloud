# Cloud API와 자동화, IaC 개념의 확산

### 클라우드 트렌드가 바꿔놓은 것

- Development Process
    - Waterfall > Agile > DevOps
- Application Architecture
    - Monolithic > N-Tier > Microservices
- Development And Packaging
    - Physical Servers > Virtual Servers > Containers
- Application Infrastructure
    - Hosted > Data Center > Cloud

### API Application Programming Interface

- 애플리케이션 프로그래밍 인터페이스의 약자로, 프로그램들이 서로 상호작용하는 것을 도와주는 매개체
    - ex. 날씨 서비스용 API에서는 사용자는 우편번호를 제공하고, 생산자는 해당 지역의 온도를 답하도록 지정 가능
- 관리 콘솔을 통해서 클릭하는 것이 아니라, 프로그램 언어를 통해서 명령을 내리는 것이 가능
- 자동화의 기반 기술로 활용되며 클라우드와 조합해 많은 이점을 누릴 수 있음
    - ex. 현재 시스템 부하가 80% 이상 발생 시 자동으로 자원을 확장하라

API 활용 예

- 클라우드의 설계도를 그림의 형태로 이용할 수 있지만, 어디까지 참고만 가능하고 실제적 환경을 동일하게 생성하기 위해서는 새로운 작업 필요
    - ex. 인스턴스를 콘솔로 만드는 것은 편하지만, 사용하다보면 비효율적이다.
- 이를 해결하기 위해 설계도를 그림이 아닌 코드와 같은 형태로 작성하는 방법론이 대두. 이를 IaC(Infrastrucrute-as-a-Code)라고 함.
- 단순한 환경을 관리할 때는 웹 화면으로 충분히 가능하지만, 실제 복잡한 환경에서는 IaC를 사용하는 것이 일반적.

### 자동화된 파이프라인 구성을 위한 배경 이해

- 개발계, 스테이징, 운영계
- 개발계와 운영계는 최대한 유사한 환경으로 구성
- 단, 개발계는 좀 더 버전이나 새로운 코드들이 반영되어 있음
- 검증이 끝난 개발 코드는 운영계로 전달

### 개발 브랜치 이해하기

- 개발 브랜치는 여러 개발자가 협업하면서 작업될 수 있는 구조로 동작
- 특정 릴리즈가 걸리는 경우에는 해당 마스터에 업데이트를 하며, 로드맵이 뒤에 있는 경우 다른 브랜치를 따서 개발을 진행하는 형태로 수행

### 코드 기반 클라우드 빌드 및 배포

- GitHub + Cloud Build
- 배포 방식
    - 롤링
    - 블루/그린
    - 카나리
    


# Terraform을 활용한 IaC의 구현

### 현대적 인프라의 문제점

- 종속된 복잡한 기술
- 클라우드 기술 인력 부재
- 구성 및 변경 작업 어려움
- 위험이 높은 매뉴얼 작업
- 민감한 정보 관리 어려움

### 수동 프로비저닝

- 단순한 구조와 테스트를 위한 작업에 어울림
- 반복작업에 실수가 발생
- 인프라 구성 행위를 통제하거나 개별적 프로비저닝을 관리할 수 없음
- 표준화된 구성을 동작하지 않고 최신화되지 않는 방식으로 관리

### IaC 기반 자동 프로비저닝

- 복잡한 구조를 쉽게 구성하고 관리
- 반복작업에 실수가 없음
- 모든 인프라 프로비저닝 작업은 중앙에서 관리되고 기록
- 표준화된 구성 방식을 통해 기업의 전사적 표준 배포 방식 구성

## ⇒ 클라우드는 ‘민첩성’을 구매하는 것


### IaC Infrastructure as Code

- 정의
    - 컴퓨터에서 읽을 수 있는 정의 파일을 사용해 클라우드 인프라를 관리하고 프로비저닝하는 프로세스
    - 실행 가능한 ‘문서’
- 도입하는 고객의 특징
    - 인프라 환경적 요인
        - 다양한 인프라에서 서비스를 운영하려는 고객 - 구축 및 관리 어려움
        - 인프라 생성, 변경, 삭제 등의 작업이 빈번히 발생하는 고객 - 메뉴얼 작업으로 위험요소 발생
    - 조직적 문제 요인
        - 조직 내 개발/운영 인력 변동이 빈번한 고객 (조직 내 기술 보유, 자산화 어려움)
        - 소수의 인원으로 인프라를 운영하고, 개발 조직의 요청을 감당하지 못하는 조직
        - 협렵업체 인프라 관리 구조 > 자사 인력 인프라 관리 구조로 변화하는 고객
        - DevOps 조직이 인프라 운영을 같이 해야하는 고객 (디지털 Business의 계획 보유 혹은 운영중)
    - 보안 정책 관리 문제 요인
        - 인프라의 보안 정책 및 규격 등 중앙화 된 정책을 통한 관리가 필요한 고객
- IaC로 할 수 있는 것
    - 인프라스트럭처의 자산화 및 일관된 운영환경
    - 클라우드 역량 강화 및 기업 거버넌스
    - 신속하고 안전한 인프라 구축
    - 관리 효율성 증가
